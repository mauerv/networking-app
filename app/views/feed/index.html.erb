<div class='container'>
	<div class='mb-4'>
		<h3>Contacts</h3>
		<%= link_to "See My Contacts (#{@profile.contacts.count})", contacts_path, class: 'btn btn-primary' %>
	</div>

	<h3>Invitations</h3>
	<ul class='list-group'>
		<% if @profile.requestor_relationships.length != 0 %>
			<% @profile.requestor_relationships[0...3].each do |cr| %>
				<li class='list-group-item d-flex align-items-center align-items-md-start justify-content-between w-100 flex-column flex-md-row'>
					<div>
						<%= image_tag cr.profile.image.variant(resize: "100x100") %>
					</div>
					<div class='d-flex w-100 flex-column'>
						<div class='d-flex justify-content-between'>
							<div>
								<%= link_to(cr.profile.name, profile_path(cr.profile), class: 'mb-0 text-primary font-weight-bold') %>
								<p class='subtitle-small'><%= cr.profile.title %></p>
							</div>
							<div class='align-self-center'>
							<%= link_to 'Ignore',  connection_request_path(cr), method: :delete, class: 'btn btn-primary' %>
							<%= link_to 'Accept', connection_request_path(cr),
								method: :put, class: 'btn btn-primary' %>
							</div>	
						</div>
						<% if cr.request_message %>
							<div class='w-100 bg-secondary p-3 rounded'>
								<%= cr.request_message %> 
							</div>
						<% end %>
					</div>
				</li>	
			<% end %>
			<% if @profile.requestor_relationships.length > 3%>
				<%= link_to "Manage All (#{@profile.requestor_relationships.length})", connection_requests_path, class: 'btn btn-primary d-flex flex-shrink mt-3 ml-auto mr-auto' %>
			<% end %>
		<% else %>
			<li class='list-group-item'>
				<p>You have no pending invitations.</p>
				<%= link_to "Manage", connection_requests_path, class: 'btn btn-primary ' %>
			</li>
		<% end %>
	</ul>
</div>